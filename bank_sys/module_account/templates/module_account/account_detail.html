<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Личный кабинет{% endblock %}</title>
    {% load django_bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}
</head>

<h3>Карты по счету №{{ account.number }}</h3>

<ul class="list-group mb-3">
    {% for card in cards %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <span>
                <span class="fw-bold">**** **** **** {{ card.number|slice:"-4:" }}</span>
                {% if card.is_primary %}
                    <span class="badge bg-primary ms-2">Основная</span>
                {% endif %}
            </span>
        </li>
    {% empty %}
        <li class="list-group-item text-muted">Карт пока нет</li>
    {% endfor %}
</ul>

{% if cards|length < 5 %}
    <form method="post" action="{% url 'card_create' account.id %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-success w-100">Выпустить новую карту</button>
    </form>
{% else %}
    <div class="alert alert-danger mt-2" role="alert">
        Максимум 5 карт на счет!
    </div>
{% endif %}

<p class="mt-3">
    Вернуться в <a href="{% url 'profile' %}">личный кабинет</a>
</p>